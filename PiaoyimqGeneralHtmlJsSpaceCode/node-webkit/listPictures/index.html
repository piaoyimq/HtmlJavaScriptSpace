<!DOCTYPE html>
<html>

	<head lang="en">
		<meta charset="UTF-8">
		<title>看图</title>
		<script>
			
			function getImgList(pics_path) {
				var fs = require("fs");
				var path = require("path");
				
				var li = fs.readdirSync(pics_path);
				console.log(li);
				var imgArr = [];
				for(var i = 0; i < li.length; i++) {
					stats = fs.statSync(path.join(pics_path, li[i]));
					if(stats.isFile() && (li[i].indexOf(".jpg") >= 0)) {
						imgArr.push("file:///"+(path.join(pics_path, li[i])));
					}
				}

				console.log(imgArr);
				return imgArr;
			}

			var fileArr = getImgList("C:/Users/Administrator/Desktop/pic");
			var index = 0;
			
			function scan_pics()
			
			{
				pic_path=document.getElementById("inputFolderBrowse").value;
//				alert(pic_path);
				fileArr = getImgList(pic_path);
				index = 0;
//				alert(fileArr);
			}

			
			function next() {
				index++;
				if(index >= fileArr.length) {
					index = 0;
				}

				document.getElementById("pic").src = fileArr[index];
			}

			function pre() {
				index--;
				if(index < 0) 
				{
					index = fileArr.length - 1;
				}
				document.getElementById("pic").src = fileArr[index];
			}
						
			
		</script>
	</head>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		
		#picBox {
			margin: 10px auto;
			width: 1300px;
			height: 100px;
		}
		
		#pic {
			width: auto;
			height: 600px;
		}
		
		#buttonBox {
			width: 150px;
			margin: 10px auto;
		}
	</style>

	<body>
		<input type="file" id="inputFolderBrowse" nwdirectory="nwdirectory" onchange="scan_pics()"/>
		<div id="picBox">
			<!--输入文件夹路径：<input type="text" id="file" value="C:\\Users\\Administrator\\Desktop\\pic">
			<input type="submit" value="Submit" onclick="setPath()">-->
			<img src="" alt="No pictures" id="pic" >
			<script>
//				document.write("<img src='' id='pic'>");
				document.getElementById("pic").src = fileArr[0]; //use a non asyonous function
				console.log("%d is aa file", fileArr.length);
			</script>
			
			<div id="buttonBox">
				<input type="button" value="上一张" onclick=pre()>
				<input type="button" value="下一张" onclick=next()>
				<br>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<input type="button" value="刷新" onclick=document.location.reload()>
			</div>
		</div>

	</body>

</html>